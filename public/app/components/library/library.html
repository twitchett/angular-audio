<!-- START: library.html -->
<div>
	<h2>Library</h2>
	<h4>Viewing {{lib.subtracks.length}} of {{lib.tracks.length}}</h4>

	<br />tracks {{ lib.tracks.length }}
	 // subtracks: {{ lib.subtracks.length }}
	 // displayTracks: {{ lib.displayTracks.length }}

	<div class="panel panel-default">
		<div class="panel-heading">
			<form class="form-inline form-group">

				<input type="text" class="form-control" ng-model="lib.search" ng-change="lib.doTextFilter(lib.search)" placeholder="filter">

				<button type="button" class="btn btn-default" ng-click="lib.openImport()">Import</button>

				<input type="checkbox" class="btn btn-sm"
					ng-class="{ 'active' : lib.typeFilters.src.yt }"
					ng-change="lib.doTypeFilter()"
					ng-model="lib.typeFilters.src.yt">YouTube</button>

				<input type="checkbox" class="btn btn-sm"
					ng-class="{ 'active' : lib.typeFilters.src.yt }"
					ng-change="lib.doTypeFilter()"
					ng-model="lib.typeFilters.src.sc">SoundCloud</button>

				<button type="button" aria-label="condensed view"
					class="btn btn-default btn-sm  {{ !lib.expanded ? 'active' : '' }}" 
					ng-click="lib.expand(false)">
					<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
				</button>
				<button type="button" aria-label="expanded view"
					class="btn btn-default btn-sm {{ lib.expanded ? 'active' : '' }}" 
					ng-click="lib.expand(true)">
					<span class="glyphicon glyphicon-picture" aria-hidden="true"></span>
				</button>

			</form>
		</div> <!--/panel-heading -->

		<table class="table table-hover library-table {{ lib.expanded ? 'expanded' : 'table-condensed' }}">

			<thead>
				<th ng-show="lib.expanded"></th>
				<th>Title</th>
				<th>Rating</th>
				<th>Link</th>
				<th>Actions</th>
			</thead>

			<tbody>
				<!-- ng-repeat="track in lib.displayTracks  | orderBy: lib.order | filter:lib.search | typeFilter:lib.filters as subtracks"  -->
				<tr lazy-load
					ng-repeat="track in lib.displayTracks  | orderBy: lib.order" 
					ng-click="lib.selectTrack($index, $event)"
					ng-class="track.selected ? 'selected' : 'unselected'">

					<td ng-show="lib.expanded">
						<a href="{{track.getSrcUlr()}}"><img src="{{track.img_url}}"></a>
					</td>
					<td>
						{{ track.src != 'yt' ? track.uploader + ' - ' + track.name : track.name }} 
					</td>
					<td class="table-col-rating">
						<rating ng-model="track.rating" max="5" readonly="false"></rating>
					</td>
					<td>
						<a href="{{ track.getSrcUrl() }}" target="_blank">
							<img src="{{ track.getSrcIconUrl() }}" />
						</a>
					</td>
					<td>
						<button type="button" aria-label="expanded view"
							class="btn btn-default btn-xs" 
							ng-click="lib.editTrack($index, $event)">
							<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
						</button>
						<button type="button" aria-label="expanded view"
							class="btn btn-default btn-xs" 
							ng-click="lib.deleteTrack($index, $event)">
							<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
						</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div> <!-- /panel -->
</div>
<!-- END: library.html -->